"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[72],{1084:(t,e,s)=>{s.d(e,{Z:()=>r});var a=s(3645),i=s.n(a)()((function(t){return t[1]}));i.push([t.id,".btn-info[data-v-660886f0]{color:#fff}label[data-v-660886f0]{display:block!important}",""]);const r=i},7594:(t,e,s)=>{s.r(e),s.d(e,{default:()=>o});const a={data:function(){return{cart_items:"",orders:[],subtotal:""}},components:{},props:[],computed:{computedSubTotal:function(){var t=this;return this.subtotal=null,this.orders.forEach((function(e,s){t.cart_items.forEach((function(s){e==s.id&&(t.subtotal=t.subtotal+=s.product_size_details.price*s.quantity)}))})),this.subtotal},computedTotal:function(){return this.subtotal}},methods:{increaseQuantity:function(t){if(t.quantity<t.product_size_details.stock){t.quantity++,this.$store.commit("mutateCartCount",this.$store.getters.getCartCount+1);var e="Bearer ".concat(this.$store.getters.currentUser.token);axios({method:"patch",params:{quantity:t.quantity},url:"/api/cart/".concat(t.id),headers:{Authorization:e}}).then((function(t){})).catch((function(t){}))}},decreaseQuantity:function(t){if(t.quantity>1){t.quantity--,this.$store.commit("mutateCartCount",this.$store.getters.getCartCount-1);var e="Bearer ".concat(this.$store.getters.currentUser.token);axios({method:"patch",params:{quantity:t.quantity},url:"/api/cart/".concat(t.id),headers:{Authorization:e}}).then((function(t){})).catch((function(t){}))}},changeQuantity:function(t){""!=document.getElementById("input_"+t.id).value&&0!=document.getElementById("input_"+t.id).value||(document.getElementById("input_"+t.id).value=t.quantity),document.getElementById("input_"+t.id).value>t.product_size_details.stock&&(document.getElementById("input_"+t.id).value=t.product_size_details.stock),t.quantity>+document.getElementById("input_"+t.id).value?this.$store.commit("mutateCartCount",this.$store.getters.getCartCount-(t.quantity-+document.getElementById("input_"+t.id).value)):this.$store.commit("mutateCartCount",this.$store.getters.getCartCount+ +document.getElementById("input_"+t.id).value-t.quantity),t.quantity=+document.getElementById("input_"+t.id).value;var e="Bearer ".concat(this.$store.getters.currentUser.token);axios({method:"patch",params:{quantity:t.quantity},url:"/api/cart/".concat(t.id),headers:{Authorization:e}}).then((function(t){console.log(t.data)})).catch((function(t){console.log(t)}))},deleteCartItem:function(t){var e=this;this.cart_items.forEach((function(s,a){s==t&&e.cart_items.splice(a,1)})),this.orders&&this.orders.forEach((function(s,a){s==t.id&&(e.orders.splice(a,1),e.$refs.subtotal.innerText=parseInt(e.$refs.subtotal.innerText)-t.product_size_details.price*+document.getElementById("input_"+t.id).value)}));var s="Bearer ".concat(this.$store.getters.currentUser.token);axios.delete("/api/cart/".concat(t.id),{headers:{Authorization:s}}).then((function(t){})).catch((function(t){}))},selectProduct:function(t,e){this.$refs.selectAll.checked&&this.orders.length<this.cart_items.length&&(this.$refs.selectAll.checked=!1),this.orders.length==this.cart_items.length&&(this.$refs.selectAll.checked=!0)},selectAll:function(t){var e=this;t.target.checked?(this.orders=[],this.cart_items.forEach((function(t){e.orders.push(t.id)}))):this.orders=[]},submitOrder:function(){var t=this;if(this.orders.length){var e="Bearer ".concat(this.$store.getters.currentUser.token);axios({method:"post",data:{id:this.orders},url:"/api/order",headers:{Authorization:e}}).then((function(e){t.orders=[],t.cart_items=e.data.cart_items})).catch((function(t){}))}}},watch:{$data:{handler:function(t,e){console.log("watcher: ",t)},deep:!0}},updated:function(){},mounted:function(){var t=this,e="Bearer ".concat(this.$store.getters.currentUser.token);axios({method:"get",url:"/api/cart/",headers:{Authorization:e}}).then((function(e){t.cart_items=e.data.cart_items})).catch((function(t){}))}};var i=s(3379),r=s.n(i),c=s(1084),n={insert:"head",singleton:!1};r()(c.Z,n);c.Z.locals;const o=(0,s(1900).Z)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"space-intro"},[s("div",{staticClass:"container"},[s("div",{staticClass:"card shadow bg-primary"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-8"},[s("div",{staticClass:"card shadow mb-4"},[s("div",{staticClass:"card-body p-4"},[t.cart_items.length?s("div",{staticClass:"h5"},[t._v("Shopping Cart")]):s("div",{staticClass:"h5"},[t._v("No items in the cart yet.")]),t._v(" "),s("hr"),t._v(" "),t.cart_items.length?s("div",{staticClass:"form-check mb-3"},[s("label",{staticClass:"form-check-label"},[s("input",{ref:"selectAll",staticClass:"form-check-input",attrs:{type:"checkbox"},on:{change:function(e){return t.selectAll(e)}}}),t._v("\n                      Select All\n                    ")])]):t._e(),t._v(" "),t._l(t.cart_items,(function(e,a){return s("div",{key:a,staticClass:"card shadow mb-3"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-2 mb-2"},[s("label",{attrs:{for:"label_"+e.id}},[s("img",{staticClass:"img mb-1",attrs:{src:"/img/product/"+e.product_details.image,alt:"",height:"100"}})]),t._v(" "),s("div",{staticClass:"text-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.orders,expression:"orders"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"label_"+e.id},domProps:{value:e.id,checked:Array.isArray(t.orders)?t._i(t.orders,e.id)>-1:t.orders},on:{change:[function(s){var a=t.orders,i=s.target,r=!!i.checked;if(Array.isArray(a)){var c=e.id,n=t._i(a,c);i.checked?n<0&&(t.orders=a.concat([c])):n>-1&&(t.orders=a.slice(0,n).concat(a.slice(n+1)))}else t.orders=r},function(s){return t.selectProduct(s,e)}]}})])]),t._v(" "),s("div",{staticClass:"col-md-7 mb-2"},[s("div",{staticClass:"h5"},[t._v("\n                            "+t._s(e.product_details.name)+"\n                          ")]),t._v(" "),s("div",[t._v(t._s(e.product_details.description))]),t._v(" "),s("div",{staticClass:"mt-2"},[s("div",{staticClass:"h5"},[t._v("\n                              Size:\n                              "+t._s(e.product_size_details.value+e.product_size_details.unit)+"\n                            ")])]),t._v(" "),s("div",[s("a",{staticClass:"text-muted",attrs:{href:"#!"},on:{click:function(s){return t.deleteCartItem(e)}}},[s("i",{staticClass:"fa fa-trash-o fa-lg"})])])]),t._v(" "),s("div",{staticClass:"col-md-3"},[s("div",{staticClass:"text-center h4"},[t._v("\n                            P "+t._s(e.product_size_details.price)+"\n                          ")]),t._v(" "),s("div",{staticClass:"input-group mb-1"},[s("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.decreaseQuantity(e)}}},[s("i",{staticClass:"fa fa-minus"})]),t._v(" "),s("input",{staticClass:"form-control text-center",attrs:{type:"number",id:"input_"+e.id,min:"1"},domProps:{value:e.quantity},on:{change:function(s){return t.changeQuantity(e)}}}),t._v(" "),s("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.increaseQuantity(e)}}},[s("i",{staticClass:"fa fa-plus"})])]),t._v(" "),s("div",{staticClass:"text-center"},[t._v("\n                            "+t._s(e.product_size_details.stock)+" stocks left\n                          ")])])])])])}))],2)])]),t._v(" "),s("div",{staticClass:"col-lg-4"},[s("div",{staticClass:"card shadow"},[s("div",{staticClass:"card-body p-4"},[s("h3",[t._v("Summary")]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"mt-4"},[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"h5"},[t._v("Products")]),t._v(" "),s("div",{staticClass:"ms-auto"},[s("span",[t._v("P")]),t._v(" "),s("span",[t._v(t._s(t.computedSubTotal))])])]),t._v(" "),t._m(0),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"d-flex mb-2"},[s("div",{staticClass:"h5"},[t._v("Total")]),t._v(" "),s("div",{staticClass:"ms-auto"},[s("span",[t._v("P")]),t._v(" "),s("span",[t._v(t._s(t.computedTotal))])])]),t._v(" "),s("div",{staticClass:"text-center"},[s("button",{staticClass:"btn btn-primary w-100",on:{click:t.submitOrder}},[t._v("\n                        Place Order\n                      ")])])])])])])])])])])])])}),[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex"},[s("div",{staticClass:"h5"},[t._v("Discount")]),t._v(" "),s("div",{staticClass:"ms-auto"},[t._v("0")])])}],!1,null,"660886f0",null).exports}}]);